<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="~{fragments/header :: header(title='Home')}">
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-black text-white h-screen w-screen">
  <div th:replace="~{fragments/navbar :: navbar}"></div>

  <!-- Admin Dashboard Button -->
  <div sec:authorize="hasRole('ADMIN')" class="flex justify-center my-4 z-50 relative">
    <a href="/admin/dashboard" class="px-6 py-2 bg-yellow-500 text-black rounded-lg shadow-lg hover:bg-yellow-400 transition">
      Admin Dashboard
    </a>
  </div>

  <!-- Fullscreen Carousel -->
  <div class="relative w-full h-screen overflow-hidden">
    <div class="flex w-full h-full transition-transform duration-700 ease-in-out" id="slider">
      <img src="/assets/9.jpg" class="w-full h-full object-cover flex-shrink-0" alt="Slide 1">
      <img src="/assets/3_with_bgc (1).png" class="w-full h-full object-cover flex-shrink-0" alt="Slide 2">
      <img src="/assets/banner.webp" class="w-full h-full object-cover flex-shrink-0" alt="Slide 3">
    </div>

    <!-- Controls -->
    <button onclick="prevSlide()" class="absolute top-1/2 left-3 -translate-y-1/2 bg-black/40 p-3 rounded-full hover:bg-black/60 text-white">
      ❮
    </button>
    <button onclick="nextSlide()" class="absolute top-1/2 right-3 -translate-y-1/2 bg-black/40 p-3 rounded-full hover:bg-black/60 text-white">
      ❯
    </button>

    <!-- Dots Indicators -->
    <div class="absolute bottom-5 left-1/2 -translate-x-1/2 flex space-x-2">
      <span class="dot w-3 h-3 bg-white rounded-full cursor-pointer" onclick="showSlide(0)"></span>
      <span class="dot w-3 h-3 bg-gray-400 rounded-full cursor-pointer" onclick="showSlide(1)"></span>
      <span class="dot w-3 h-3 bg-gray-400 rounded-full cursor-pointer" onclick="showSlide(2)"></span>
    </div>
  </div>

  <!-- Section placeholders -->
  <div th:replace="~{fragments/headings :: bulletHeading(heading='Deals of the Day')}"></div>
  <div th:replace="~{fragments/deals :: deals}" th:with="deals=${deals}"></div>
  <div th:replace="~{fragments/categories :: collage}" th:with="categories=${categories}, categoryCatchphrase=${categoryCatchphrase}"></div>

  <div th:replace="~{fragments/navbar :: footer}"></div>

  <!-- Carousel Script -->
  <script>
    const slider = document.getElementById("slider");
    const slides = slider.children;
    const dots = document.querySelectorAll(".dot");
    let index = 0;

    function showSlide(i) {
      index = (i + slides.length) % slides.length;
      slider.style.transform = `translateX(-${index * 100}%)`;
      updateDots();
    }

    function nextSlide() {
      showSlide(index + 1);
    }

    function prevSlide() {
      showSlide(index - 1);
    }

    function updateDots() {
      dots.forEach((dot, i) => {
        dot.classList.toggle("bg-white", i === index);
        dot.classList.toggle("bg-gray-400", i !== index);
      });
    }

    // Auto slide every 4s
    setInterval(nextSlide, 4000);
    updateDots();
  </script>
</body>
</html>
